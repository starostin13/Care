# Crusade Care Bot - Telegram Mini App

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç –≤–∫–ª—é—á–∞–µ—Ç —Ç–µ–ª–µ–≥—Ä–∞–º –±–æ—Ç–∞ –¥–ª—è –∏–≥—Ä—ã Crusade –∏ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (mini-app) –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∫–∞—Ä—Ç—ã –≥–∞–ª–∞–∫—Ç–∏–∫–∏.

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
pip install -r requirements.txt
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

1. –†–∞–∑–º–µ—Å—Ç–∏—Ç–µ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –Ω–∞ Heroku, Railway, –∏–ª–∏ —Å–≤–æ–µ–º VPS)
2. –û–±–Ω–æ–≤–∏—Ç–µ URL –≤ —Ñ–∞–π–ª–µ `keyboard_constructor.py`, –∑–∞–º–µ–Ω–∏–≤ `"https://your-domain.com/map"` –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π URL –≤–∞—à–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Telegram Bot

1. –°–æ–∑–¥–∞–π—Ç–µ –±–æ—Ç–∞ —á–µ—Ä–µ–∑ @BotFather –≤ Telegram
2. –û–±–Ω–æ–≤–∏—Ç–µ —Ç–æ–∫–µ–Ω –≤ `config.py`
3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ Menu Button –¥–ª—è –≤–∞—à–µ–≥–æ –±–æ—Ç–∞ —á–µ—Ä–µ–∑ @BotFather:
   - –û—Ç–ø—Ä–∞–≤—å—Ç–µ –∫–æ–º–∞–Ω–¥—É `/setmenubutton`
   - –í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—à–µ–≥–æ –±–æ—Ç–∞
   - –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Ç–µ–∫—Å—Ç –∫–Ω–æ–ø–∫–∏: "üó∫Ô∏è Map"
   - –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ URL: `https://your-domain.com/map`

### 4. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Mini App –≤ Telegram

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –∫ @BotFather
2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ `/newapp`
3. –í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—à–µ–≥–æ –±–æ—Ç–∞
4. –£–∫–∞–∂–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è: "Crusade Map"
5. –£–∫–∞–∂–∏—Ç–µ –æ–ø–∏—Å–∞–Ω–∏–µ: "Interactive galaxy map for Crusade game"
6. –ó–∞–≥—Ä—É–∑–∏—Ç–µ –∏–∫–æ–Ω–∫—É (512x512 PNG)
7. –£–∫–∞–∂–∏—Ç–µ URL: `https://your-domain.com/map`

### 5. –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π

#### –ó–∞–ø—É—Å–∫ —Ç–µ–ª–µ–≥—Ä–∞–º –±–æ—Ç–∞:
```bash
python handlers.py
```

#### –ó–∞–ø—É—Å–∫ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:
```bash
python webapp.py
```

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

- `handlers.py` - –æ—Å–Ω–æ–≤–Ω–æ–π —Ñ–∞–π–ª —Ç–µ–ª–µ–≥—Ä–∞–º –±–æ—Ç–∞
- `webapp.py` - –∑–∞–ø—É—Å–∫ Flask –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- `views.py` - –º–∞—Ä—à—Ä—É—Ç—ã Flask –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- `templates/map.html` - HTML —à–∞–±–ª–æ–Ω –¥–ª—è –∫–∞—Ä—Ç—ã
- `sqllite_helper.py` - —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö
- `keyboard_constructor.py` - —Å–æ–∑–¥–∞–Ω–∏–µ –∫–ª–∞–≤–∏–∞—Ç—É—Ä –¥–ª—è –±–æ—Ç–∞

## –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

### Telegram Bot
- –û—Å–Ω–æ–≤–Ω–æ–µ –º–µ–Ω—é —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏, –º–∏—Å—Å–∏—è–º–∏ –∏ –∫–Ω–æ–ø–∫–æ–π –∫–∞—Ä—Ç—ã
- –°–∏—Å—Ç–µ–º–∞ –º–∏—Å—Å–∏–π –∏ –±–∏—Ç–≤
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞–ª—å—è–Ω—Å–∞–º–∏ –∏ –∏–≥—Ä–æ–∫–∞–º–∏

### Mini App (–ö–∞—Ä—Ç–∞)
- –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è —à–µ—Å—Ç–∏—É–≥–æ–ª—å–Ω–∞—è –∫–∞—Ä—Ç–∞ –≥–∞–ª–∞–∫—Ç–∏–∫–∏
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–æ–Ω—Ç—Ä–æ–ª—è —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏–π —Ä–∞–∑–Ω—ã–º–∏ –∞–ª—å—è–Ω—Å–∞–º–∏
- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–∞–∂–¥–æ–º —Å–µ–∫—Ç–æ—Ä–µ –ø—Ä–∏ –∫–ª–∏–∫–µ
- –ò—Å—Ç–æ—Ä–∏—è –±–∏—Ç–≤ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–µ–∫—Ç–æ—Ä–∞
- –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –¥–∏–∑–∞–π–Ω –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤

## API Endpoints

- `GET /map` - —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å –∫–∞—Ä—Ç–æ–π
- `GET /api/map-data` - –¥–∞–Ω–Ω—ã–µ –∫–∞—Ä—Ç—ã –≤ JSON —Ñ–æ—Ä–º–∞—Ç–µ
- `GET /api/hex-info/<hex_id>` - –¥–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–µ–∫—Ç–æ—Ä–µ

## –¶–≤–µ—Ç–æ–≤–∞—è —Å—Ö–µ–º–∞ –∫–∞—Ä—Ç—ã

- –°–µ—Ä—ã–π - –Ω–µ–∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ–º—ã–µ —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏–∏
- –ö—Ä–∞—Å–Ω—ã–π (#ff6b6b) - Alliance 1
- –ë–∏—Ä—é–∑–æ–≤—ã–π (#4ecdc4) - Alliance 2  
- –°–∏–Ω–∏–π (#45b7d1) - Alliance 3
- –ñ–µ–ª—Ç—ã–µ –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∏–∫–∏ - —Å–∫–ª–∞–¥—ã

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Python 3.8+
- Flask 2.3+
- python-telegram-bot 20.6+
- aiosqlite 0.19+
- SQLite –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Å —Ç–∞–±–ª–∏—Ü–∞–º–∏ map, alliances, map_story
