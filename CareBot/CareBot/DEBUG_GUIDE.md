# üêõ –û—Ç–ª–∞–¥–∫–∞ Telegram Bot –≤ VS Code

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–π VS Code
–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É –≤–∞—Å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã:
- **Python** (ms-python.python)
- **Python Debugger** (ms-python.debugpy)

### 2. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
```bash
pip install -r requirements.txt
```

## üéØ –°–ø–æ—Å–æ–±—ã –∑–∞–ø—É—Å–∫–∞ –æ—Ç–ª–∞–¥–∫–∏

### –ú–µ—Ç–æ–¥ 1: –ß–µ—Ä–µ–∑ –ø–∞–Ω–µ–ª—å Debug (–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
1. –û—Ç–∫—Ä–æ–π—Ç–µ –ø–∞–Ω–µ–ª—å **Run and Debug** (Ctrl+Shift+D)
2. –í—ã–±–µ—Ä–∏—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é:
   - **ü§ñ Debug Telegram Bot** - —Ç–æ–ª—å–∫–æ –±–æ—Ç
   - **üåê Debug Flask Web App** - —Ç–æ–ª—å–∫–æ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ  
   - **üîß Debug Both (Bot + Web)** - –æ–±–∞ —Å–µ—Ä–≤–∏—Å–∞ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ
3. –ù–∞–∂–º–∏—Ç–µ **F5** –∏–ª–∏ –∫–Ω–æ–ø–∫—É ‚ñ∂Ô∏è

### –ú–µ—Ç–æ–¥ 2: –ß–µ—Ä–µ–∑ Command Palette
1. –ù–∞–∂–º–∏—Ç–µ **Ctrl+Shift+P**
2. –í–≤–µ–¥–∏—Ç–µ "Debug: Select and Start Debugging"
3. –í—ã–±–µ—Ä–∏—Ç–µ –Ω—É–∂–Ω—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é

### –ú–µ—Ç–æ–¥ 3: –ß–µ—Ä–µ–∑ Tasks
1. –ù–∞–∂–º–∏—Ç–µ **Ctrl+Shift+P**
2. –í–≤–µ–¥–∏—Ç–µ "Tasks: Run Task"
3. –í—ã–±–µ—Ä–∏—Ç–µ:
   - **ü§ñ Run Telegram Bot**
   - **üåê Run Flask Web App**
   - **üîß Run Both Services**

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ç–æ—á–µ–∫ –æ—Å—Ç–∞–Ω–æ–≤–∞ (Breakpoints)

### –í —Ç–µ–ª–µ–≥—Ä–∞–º –±–æ—Ç–µ:
- `handlers.py` - –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–æ–º–∞–Ω–¥ –∏ —Å–æ–æ–±—â–µ–Ω–∏–π
- `keyboard_constructor.py` - —Å–æ–∑–¥–∞–Ω–∏–µ –∫–ª–∞–≤–∏–∞—Ç—É—Ä
- `sqllite_helper.py` - —Ä–∞–±–æ—Ç–∞ —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö

### –í –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏:
- `views.py` - –º–∞—Ä—à—Ä—É—Ç—ã Flask
- `templates/map.html` - —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ (–¥–ª—è –æ—Ç–ª–∞–¥–∫–∏ JS –≤ –±—Ä–∞—É–∑–µ—Ä–µ)

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ª–æ–≥–∏

### –õ–æ–≥–∏ —Ç–µ–ª–µ–≥—Ä–∞–º –±–æ—Ç–∞:
```python
import logging
logger = logging.getLogger(__name__)
logger.info("Debug message")
```

### –õ–æ–≥–∏ Flask:
```python
from flask import current_app
current_app.logger.info("Debug message")
```

## üåê –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ Flask –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:
- **–ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞**: http://localhost:5000
- **–ö–∞—Ä—Ç–∞**: http://localhost:5000/map
- **API –¥–∞–Ω–Ω—ã–µ –∫–∞—Ä—Ç—ã**: http://localhost:5000/api/map-data
- **API –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ hex**: http://localhost:5000/api/hex-info/1

## üêõ –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö:
```python
import asyncio
import sqllite_helper

async def test_db():
    cells = await sqllite_helper.get_all_map_cells()
    print(f"Found {len(cells)} map cells")
    return cells

# –ó–∞–ø—É—Å–∫ –≤ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–π –∫–æ–Ω—Å–æ–ª–∏ Python
asyncio.run(test_db())
```

### –¢–µ—Å—Ç API:
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞–Ω–Ω—ã—Ö –∫–∞—Ä—Ç—ã
curl http://localhost:5000/api/map-data

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ hex
curl http://localhost:5000/api/hex-info/1
```

## üîç –û—Ç–ª–∞–¥–∫–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤

### 1. –û—Ç–ª–∞–¥–∫–∞ –∫–æ–º–∞–Ω–¥ –±–æ—Ç–∞:
- –ü–æ—Å—Ç–∞–≤—å—Ç–µ breakpoint –≤ `hello()` —Ñ—É–Ω–∫—Ü–∏–∏
- –û—Ç–ø—Ä–∞–≤—å—Ç–µ `/start` –±–æ—Ç—É
- –ö–æ–¥ –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –Ω–∞ breakpoint

### 2. –û—Ç–ª–∞–¥–∫–∞ callbacks:
- –ü–æ—Å—Ç–∞–≤—å—Ç–µ breakpoint –≤ —Ñ—É–Ω–∫—Ü–∏—è—Ö –æ–±—Ä–∞–±–æ—Ç–∫–∏ callback
- –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É –≤ –±–æ—Ç–µ
- –ò–∑—É—á–∏—Ç–µ `update.callback_query.data`

### 3. –û—Ç–ª–∞–¥–∫–∞ –≤–µ–±-API:
- –ü–æ—Å—Ç–∞–≤—å—Ç–µ breakpoint –≤ `get_map_data()`
- –û—Ç–∫—Ä–æ–π—Ç–µ http://localhost:5000/map
- –ö–æ–¥ –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –¥–∞–Ω–Ω—ã—Ö –∫–∞—Ä—Ç—ã

## ‚ö†Ô∏è –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### 1. –û—à–∏–±–∫–∞ –∏–º–ø–æ—Ä—Ç–∞ –º–æ–¥—É–ª–µ–π:
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ `PYTHONPATH` –≤–∫–ª—é—á–∞–µ—Ç –ø–∞–ø–∫—É –ø—Ä–æ–µ–∫—Ç–∞
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤—Å–µ —Ñ–∞–π–ª—ã –≤ –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è—Ö

### 2. –û—à–∏–±–∫–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö:
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—É—Ç—å –∫ –ë–î –≤ `sqllite_helper.py`
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ñ–∞–π–ª –ë–î —Å—É—â–µ—Å—Ç–≤—É–µ—Ç

### 3. –ü–æ—Ä—Ç —É–∂–µ –∑–∞–Ω—è—Ç:
- –ò–∑–º–µ–Ω–∏—Ç–µ –ø–æ—Ä—Ç –≤ `webapp.py` –µ—Å–ª–∏ 5000 –∑–∞–Ω—è—Ç
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `netstat -ano | findstr :5000` –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏

## üéÆ –ì–æ—Ä—è—á–∏–µ –∫–ª–∞–≤–∏—à–∏

- **F5** - –ó–∞–ø—É—Å—Ç–∏—Ç—å –æ—Ç–ª–∞–¥–∫—É
- **F9** - –ü–æ—Å—Ç–∞–≤–∏—Ç—å/—É–±—Ä–∞—Ç—å breakpoint
- **F10** - –®–∞–≥ —á–µ—Ä–µ–∑ (Step Over)
- **F11** - –®–∞–≥ –≤ —Ñ—É–Ω–∫—Ü–∏—é (Step Into)
- **Shift+F11** - –®–∞–≥ –∏–∑ —Ñ—É–Ω–∫—Ü–∏–∏ (Step Out)
- **Ctrl+Shift+F5** - –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –æ—Ç–ª–∞–¥–∫—É
- **Shift+F5** - –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –æ—Ç–ª–∞–¥–∫—É

## üì± –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Telegram Mini App

1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ —Ä–µ–∂–∏–º–µ –æ—Ç–ª–∞–¥–∫–∏
2. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ ngrok –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è HTTPS —Ç—É–Ω–Ω–µ–ª—è:
   ```bash
   ngrok http 5000
   ```
3. –û–±–Ω–æ–≤–∏—Ç–µ URL –≤ `keyboard_constructor.py`
4. –¢–µ—Å—Ç–∏—Ä—É–π—Ç–µ mini-app –ø—Ä—è–º–æ –≤ Telegram

–£–¥–∞—á–Ω–æ–π –æ—Ç–ª–∞–¥–∫–∏! üöÄ
