# Agents Guide - CareBot Project

–≠—Ç–æ—Ç —Ñ–∞–π–ª —Å–æ–¥–µ—Ä–∂–∏—Ç –ø—Ä–∏–Ω—Ü–∏–ø—ã –∏ —Å–æ–≥–ª–∞—à–µ–Ω–∏—è –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ –∏ AI –∞–≥–µ–Ω—Ç–æ–≤, —Ä–∞–±–æ—Ç–∞—é—â–∏—Ö —Å –ø—Ä–æ–µ–∫—Ç–æ–º CareBot.

## –ú–∏–≥—Ä–∞—Ü–∏–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –º–∏–≥—Ä–∞—Ü–∏–π

–í—Å–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –¥–æ–ª–∂–Ω—ã —Ö—Ä–∞–Ω–∏—Ç—å—Å—è –≤ –ø–∞–ø–∫–µ `CareBot/CareBot/database/migrations/` –∏ —Å–ª–µ–¥–æ–≤–∞—Ç—å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–π —Å—Ö–µ–º–µ –∏–º–µ–Ω–æ–≤–∞–Ω–∏—è:

```
database/
‚îî‚îÄ‚îÄ migrations/
    ‚îú‚îÄ‚îÄ 001_add_winner_bonus_column.sql
    ‚îú‚îÄ‚îÄ 001_migrate_winner_bonus.py
    ‚îú‚îÄ‚îÄ 002_next_migration.sql
    ‚îî‚îÄ‚îÄ 002_next_migration.py
```

### –ü—Ä–∏–Ω—Ü–∏–ø—ã –∏–º–µ–Ω–æ–≤–∞–Ω–∏—è –º–∏–≥—Ä–∞—Ü–∏–π

1. **–ù–æ–º–µ—Ä –º–∏–≥—Ä–∞—Ü–∏–∏** - —Ç—Ä–µ—Ö–∑–Ω–∞—á–Ω–æ–µ —á–∏—Å–ª–æ –≤ –Ω–∞—á–∞–ª–µ –∏–º–µ–Ω–∏ (001, 002, 003, ...)
2. **–û–ø–∏—Å–∞—Ç–µ–ª—å–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ** - –∫—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ snake_case
3. **–†–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Ñ–∞–π–ª–∞**:
   - `.sql` - –¥–ª—è —á–∏—Å—Ç—ã—Ö SQL —Å–∫—Ä–∏–ø—Ç–æ–≤
   - `.py` - –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö –º–∏–≥—Ä–∞—Ü–∏–π —Å –ª–æ–≥–∏–∫–æ–π

### –ü—Ä–∏–º–µ—Ä—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –∏–º–µ–Ω–æ–≤–∞–Ω–∏—è

- `001_add_winner_bonus_column.sql` - –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–æ–ª–æ–Ω–∫–∏ winner_bonus
- `002_create_warehouses_table.sql` - —Å–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã —Å–∫–ª–∞–¥–æ–≤
- `003_migrate_user_data.py` - —Å–ª–æ–∂–Ω–∞—è –º–∏–≥—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö
- `004_add_battle_rewards_index.sql` - –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–∞ –¥–ª—è –Ω–∞–≥—Ä–∞–¥

### –°–æ–¥–µ—Ä–∂–∏–º–æ–µ –º–∏–≥—Ä–∞—Ü–∏–π

#### SQL –º–∏–≥—Ä–∞—Ü–∏–∏
–ü—Ä–æ—Å—Ç—ã–µ SQL —Å–∫—Ä–∏–ø—Ç—ã –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã —Ç–∞–±–ª–∏—Ü:
```sql
-- 001_add_winner_bonus_column.sql
-- Add winner_bonus column to mission_stack table
ALTER TABLE mission_stack ADD COLUMN winner_bonus TEXT;
```

#### Python –º–∏–≥—Ä–∞—Ü–∏–∏
–î–ª—è —Å–ª–æ–∂–Ω–æ–π –ª–æ–≥–∏–∫–∏ –º–∏–≥—Ä–∞—Ü–∏–∏ —Å –ø—Ä–æ–≤–µ—Ä–∫–∞–º–∏ –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º –¥–∞–Ω–Ω—ã—Ö:
```python
# 001_migrate_winner_bonus.py
"""
Migration script to add winner_bonus column and update existing records.
"""
import aiosqlite
import asyncio
import os

async def migrate_database():
    # –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è –∫–æ–ª–æ–Ω–∫–∏
    # –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–æ–ª–æ–Ω–∫–∏ –µ—Å–ª–∏ –Ω—É–∂–Ω–æ
    # –ú–∏–≥—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
    pass
```

### –ü—Ä–∞–≤–∏–ª–∞ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –º–∏–≥—Ä–∞—Ü–∏–π

1. **–ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å** - –º–∏–≥—Ä–∞—Ü–∏–∏ –¥–æ–ª–∂–Ω—ã –ø—Ä–∏–º–µ–Ω—è—Ç—å—Å—è —Å—Ç—Ä–æ–≥–æ –ø–æ –ø–æ—Ä—è–¥–∫—É –Ω–æ–º–µ—Ä–æ–≤
2. **–ò–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å** - –º–∏–≥—Ä–∞—Ü–∏—è –¥–æ–ª–∂–Ω–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è –ø–æ–≤—Ç–æ—Ä–Ω–æ
3. **–û—Ç–∫–∞—Ç** - –ø—Ä–∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –ø—Ä–µ–¥—É—Å–º–æ—Ç—Ä–µ—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –æ—Ç–∫–∞—Ç–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π
4. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** - –≤—Å–µ–≥–¥–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏ –Ω–∞ –∫–æ–ø–∏–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

### –†–∞–±–æ—Ç–∞ —Å winner_bonus

–°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –Ω–∞–≥—Ä–∞–¥–∞–º–∏ –ø–æ–±–µ–¥–∏—Ç–µ–ª–µ–π:

- `winner_bonus` —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ —Ç–∞–±–ª–∏—Ü–µ `mission_stack`
- –≠—Ç–æ **—Å–µ–∫—Ä–µ—Ç–Ω–∞—è** –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è, –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞—è –¥–æ –æ–∫–æ–Ω—á–∞–Ω–∏—è –±–∏—Ç–≤—ã
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `get_winner_bonus(mission_id)` –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –ø–æ—Å–ª–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –ø–æ–±–µ–¥–∏—Ç–µ–ª—è
- –ù–ï –≤–æ–∑–≤—Ä–∞—â–∞–π—Ç–µ winner_bonus –≤ `get_mission_details()`

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –º–∏—Å—Å–∏–π

### –¢–∏–ø—ã –º–∏—Å—Å–∏–π –∏ –∏—Ö –Ω–∞–≥—Ä–∞–¥—ã

#### Kill Team –º–∏—Å—Å–∏–∏:
- `Loot` - –æ–±–∞ –ø–æ–ª—É—á–∞—é—Ç 1 —Ä–µ—Å—É—Ä—Å, –ø–æ–±–µ–¥–∏—Ç–µ–ª—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã
- `Transmission` - –ø–æ–±–µ–¥–∏—Ç–µ–ª—å –ø–æ–ª—É—á–∞–µ—Ç —Ä–µ—Å—É—Ä—Å—ã —Ä–∞–≤–Ω—ã–µ —Ä–µ—Å—É—Ä—Å–∞–º –ø—Ä–æ—Ç–∏–≤–Ω–∏–∫–∞
- `Secure` - –ø–æ–±–µ–¥–∏—Ç–µ–ª—å –ø–æ–ª—É—á–∞–µ—Ç 2 —Ä–µ—Å—É—Ä—Å–∞
- `Intel` - —Å–æ–∑–¥–∞–µ—Ç —Å–∫–ª–∞–¥ –≤ –≥–µ–∫—Å–µ –º–∏—Å—Å–∏–∏
- `Sabotage` - –Ω–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π —Ä–µ—Å—É—Ä—Å–æ–≤
- `Extraction` - –ø–æ–±–µ–¥–∏—Ç–µ–ª—å +1 —Ä–µ—Å—É—Ä—Å, –ø—Ä–æ–∏–≥—Ä–∞–≤—à–∏–π -1 —Ä–µ—Å—É—Ä—Å
- `Power Surge` - –ø—Ä–æ–∏–≥—Ä–∞–≤—à–∏–π —Ç–µ—Ä—è–µ—Ç —Ä–µ—Å—É—Ä—Å—ã —Ä–∞–≤–Ω—ã–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É —Å–∫–ª–∞–¥–æ–≤ (–º–∏–Ω–∏–º—É–º 1)
- `Coordinates` - –ø—Ä–æ–∏–≥—Ä–∞–≤—à–∏–π —Ç–µ—Ä—è–µ—Ç —Ä–µ—Å—É—Ä—Å—ã + –æ–¥–∏–Ω —Å–∫–ª–∞–¥ —É–Ω–∏—á—Ç–æ–∂–∞–µ—Ç—Å—è

#### WH40K –º–∏—Å—Å–∏–∏:
- –ò–º–µ—é—Ç —Å–µ–∫—Ä–µ—Ç–Ω—ã–π `winner_bonus` –∫–æ—Ç–æ—Ä—ã–π —Ä–∞—Å–∫—Ä—ã–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø–æ–±–µ–¥–∏—Ç–µ–ª—é
- –ü—Ä–∏–º–µ—Ä—ã –±–æ–Ω—É—Å–æ–≤: –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –æ–ø—ã—Ç –¥–ª—è —é–Ω–∏—Ç–æ–≤, –±–æ–Ω—É—Å—ã –∫ —Å–ª–µ–¥—É—é—â–∏–º –±–∏—Ç–≤–∞–º

### –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –º–∏—Å—Å–∏—è–º–∏

- `generate_new_one(rules)` - —Å–æ–∑–¥–∞–µ—Ç –Ω–æ–≤—É—é –º–∏—Å—Å–∏—é —Å –±–æ–Ω—É—Å–æ–º –¥–ª—è wh40k
- `get_mission(rules)` - –ø–æ–ª—É—á–∞–µ—Ç –º–∏—Å—Å–∏—é –±–µ–∑ —Ä–∞—Å–∫—Ä—ã—Ç–∏—è —Å–µ–∫—Ä–µ—Ç–æ–≤
- `apply_mission_rewards()` - –ø—Ä–∏–º–µ–Ω—è–µ—Ç –Ω–∞–≥—Ä–∞–¥—ã –∏ —Ä–∞—Å–∫—Ä—ã–≤–∞–µ—Ç —Å–µ–∫—Ä–µ—Ç–Ω—ã–µ –±–æ–Ω—É—Å—ã
- `get_winner_bonus(mission_id)` - –ø–æ–ª—É—á–∞–µ—Ç —Å–µ–∫—Ä–µ—Ç–Ω—ã–π –±–æ–Ω—É—Å (—Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ –±–∏—Ç–≤—ã!)

## –°–æ–≥–ª–∞—à–µ–Ω–∏—è –ø–æ –∫–æ–¥—É

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `aiosqlite` –¥–ª—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ –∫ SQLite
- –í—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è SQL-–∏–Ω—ä–µ–∫—Ü–∏–π
- –ó–∞–∫—Ä—ã–≤–∞–π—Ç–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö (`async with aiosqlite.connect()`)

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `logging` –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –≤–∞–∂–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- –û—Å–æ–±–µ–Ω–Ω–æ –≤–∞–∂–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –Ω–∞–≥—Ä–∞–¥ –∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- –ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ –∑–∞–ø–∏—Å–µ–π –ø–µ—Ä–µ–¥ –∏—Ö –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º
- Graceful degradation –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –¥–∞–Ω–Ω—ã—Ö
- –õ–æ–≥–∏—Ä—É–π—Ç–µ –æ—à–∏–±–∫–∏ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

## –î–µ–ø–ª–æ–π –∏ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞

### Docker –¥–µ–ø–ª–æ–π
- –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —É–ø–∞–∫–æ–≤—ã–≤–∞–µ—Ç—Å—è –≤ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
- –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö SQLite –º–æ–Ω—Ç–∏—Ä—É–µ—Ç—Å—è –∫–∞–∫ volume –¥–ª—è –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `scripts/deploy.ps1` –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –¥–µ–ø–ª–æ—è

### –°–∫—Ä–∏–ø—Ç—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è

#### –î–µ–ø–ª–æ–π
- `scripts/deploy.ps1` - –æ—Å–Ω–æ–≤–Ω–æ–π —Å–∫—Ä–∏–ø—Ç –¥–µ–ø–ª–æ—è –Ω–∞ Ubuntu —Å–µ—Ä–≤–µ—Ä
- `scripts/test-local.ps1` - –ª–æ–∫–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Docker –æ–±—Ä–∞–∑–∞

#### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
- `scripts/monitor.ps1` - –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- `scripts/db-access.ps1` - –¥–æ—Å—Ç—É–ø –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö —Å –ª–æ–∫–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω—ã

#### Endpoints
- `/health` - health check –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Ç–∞—Ç—É—Å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
- `DATABASE_PATH` - –ø—É—Ç—å –∫ —Ñ–∞–π–ª—É –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö SQLite
- `SERVER_HOST` - —Ö–æ—Å—Ç –¥–ª—è –ø—Ä–∏–≤—è–∑–∫–∏ —Å–µ—Ä–≤–µ—Ä–∞ (0.0.0.0 –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ)
- `SERVER_PORT` - –ø–æ—Ä—Ç —Å–µ—Ä–≤–µ—Ä–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 5555)

---

*–≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç –¥–æ–ª–∂–µ–Ω –æ–±–Ω–æ–≤–ª—è—Ç—å—Å—è –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –Ω–æ–≤—ã—Ö —Å–æ–≥–ª–∞—à–µ–Ω–∏–π –∏ –ø—Ä–∏–Ω—Ü–∏–ø–æ–≤ —Ä–∞–±–æ—Ç—ã —Å –ø—Ä–æ–µ–∫—Ç–æ–º.*

## üö® –í–ê–ñ–ù–û–ï –î–û–ü–û–õ–ù–ï–ù–ò–ï (–ù–û–Ø–ë–†–¨ 2025)

### –°–∏—Å—Ç–µ–º–∞ –±—ç–∫–∞–ø–æ–≤ –ì–û–¢–û–í–ê!

**–í–ù–ò–ú–ê–ù–ò–ï AI –ê–ì–ï–ù–¢–ê–ú:** –ü–æ–ª–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö –±—ç–∫–∞–ø–æ–≤ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç!

- üìñ **–ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** `BACKUP_SYSTEM_COMPLETE.md`
- üö® **–ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –∞–≥–µ–Ω—Ç–∞–º:** `BACKUP_SYSTEM_DO_NOT_RECREATE.md`
- ‚ö° **–ì–æ—Ç–æ–≤—ã–µ —Å–∫—Ä–∏–ø—Ç—ã:** `scripts/manage-carebot.ps1`

**–ù–ï –°–û–ó–î–ê–í–ê–ô–¢–ï –ù–û–í–´–ï –°–ò–°–¢–ï–ú–´ –ë–≠–ö–ê–ü–û–í!**  
**–ò–°–ü–û–õ–¨–ó–£–ô–¢–ï –ì–û–¢–û–í–´–ï –†–ï–®–ï–ù–ò–Ø!**